-- if the player is in the aggro range, the enemy will proceed to attack him and ask his friends to join in
if player ~= nil then
	if Vector3.Distance(player.transform.position, enemy.transform.position) <= 7 then
		-- Set the enemy as aggressive
		enemy.SetAggro(true)
	
		-- Set my friends as aggressive
		local enemies = game.GetEnemiesInRadius(enemy.transform.position, 7)
		local enemyCount = luautils.GetArraySize(enemies)
		for i = 1, enemyCount do
			enemies[i].SetAggro(true)
		end
	end

	if enemy.IsAggroed() then
		if enemy.CanMove() then
			enemy.GetMovementControls().SetDestination(player.transform.position)
			animator.SetFloat("Speed", 1.0)
		end
	
		if Vector3.Distance(player.transform.position, enemy.transform.position) <= 2 then
			enemy.GetMovementControls().Stop()
			enemy.ExecuteAttack("BasicAttack")
			animator.SetFloat("Speed", 0)
		end
	end
end